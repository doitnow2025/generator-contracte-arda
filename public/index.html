<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Contracte - ARDA Manufacturing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
        }

        .sidebar {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .sidebar h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .template-item {
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }

        .template-item:hover {
            background: #e9ecef;
            border-left-color: #667eea;
            transform: translateX(5px);
        }

        .template-item.active {
            background: #667eea;
            color: white;
            border-left-color: #764ba2;
        }

        .template-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .template-desc {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .form-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .form-section h2 {
            color: #333;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 0.95em;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e4e8;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .section-title {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 30px 0 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            border-left: 5px solid #667eea;
        }

        .rate-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e1e4e8;
        }

        .preview-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px dashed #667eea;
            display: none;
        }

        .preview-box.show {
            display: block;
        }

        .preview-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            max-height: 600px;
            overflow-y: auto;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-left: 5px solid #28a745;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border-left: 5px solid #ffc107;
        }

        .accesorii-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 10px;
        }

        .accesoriu-item {
            display: grid;
            grid-template-columns: 3fr 1fr auto;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .btn-remove {
            background: #dc3545;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .btn-remove:hover {
            background: #c82333;
        }

        .btn-add {
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .btn-add:hover {
            background: #218838;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: static;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß Generator Contracte</h1>
            <p>ARDA Manufacturing SRL - Sistem de generare automatƒÉ contracte</p>
        </div>

        <div class="main-content">
            <!-- Sidebar cu »ôabloane -->
            <div class="sidebar">
                <h2>üìã »òabloane disponibile</h2>
                <div class="template-item active" onclick="selectTemplate('contract')">
                    <div class="template-name">Contract V√¢nzare Rate</div>
                    <div class="template-desc">Contract standard cu platƒÉ √Æn rate</div>
                </div>
                <div class="template-item" onclick="selectTemplate('pv')">
                    <div class="template-name">Proces Verbal Recep»õie</div>
                    <div class="template-desc">PV pentru primirea echipamentului</div>
                </div>
                <div class="template-item" onclick="selectTemplate('garantie')">
                    <div class="template-name">Certificat Garan»õie</div>
                    <div class="template-desc">Certificat de garan»õie echipament</div>
                </div>
                <div class="template-item" onclick="selectTemplate('anexa')">
                    <div class="template-name">Anexa Echipament</div>
                    <div class="template-desc">Lista echipament »ôi accesorii</div>
                </div>
            </div>

            <!-- Formular principal -->
            <div class="form-section">
                <div id="alert" class="alert"></div>

                <h2 id="form-title">Contract de V√¢nzare cu PlatƒÉ √Æn Rate</h2>

                <form id="contractForm">
                    <!-- DATE GENERALE -->
                    <div class="section-title">üìÖ Date Generale</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>NumƒÉr Contract *</label>
                            <input type="text" id="numar_contract" placeholder="ex: 0001" required>
                        </div>
                        <div class="form-group">
                            <label>Data Contract *</label>
                            <input type="date" id="data_contract" required>
                        </div>
                    </div>

                    <!-- DATE CUMPƒÇRƒÇTOR -->
                    <div class="section-title">üë§ Date CumpƒÉrƒÉtor</div>
                    <div class="form-group">
                        <label>Tip CumpƒÉrƒÉtor *</label>
                        <select id="tip_cumparator" onchange="toggleCumparatorFields()">
                            <option value="pfa">PersoanƒÉ FizicƒÉ AutorizatƒÉ (PFA)</option>
                            <option value="srl">Societate (SRL/SA)</option>
                            <option value="pf">PersoanƒÉ FizicƒÉ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Nume Complet / Denumire *</label>
                        <input type="text" id="nume_cumparator" placeholder="ex: Dan Elena-Madalina" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>CUI / CIF *</label>
                            <input type="text" id="cui_cumparator" placeholder="ex: 45307839" required>
                        </div>
                        <div class="form-group">
                            <label>Nr. Registrul Comer»õului *</label>
                            <input type="text" id="rc_cumparator" placeholder="ex: F40/3217/2021" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>AdresƒÉ CompletƒÉ *</label>
                        <textarea id="adresa_cumparator" placeholder="ex: Bucure»ôti, Sector 3, Bld. 1 Decembrie 1918, nr. 45, Parter" required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>CNP Reprezentant *</label>
                            <input type="text" id="cnp_cumparator" placeholder="ex: 2830104032982" required>
                        </div>
                        <div class="form-group">
                            <label>Cont Bancar</label>
                            <input type="text" id="cont_cumparator" placeholder="ROXX...">
                        </div>
                    </div>

                    <!-- DATE FIDEJUSOR -->
                    <div class="section-title">üõ°Ô∏è Date Fidejusor</div>
                    <div class="form-group">
                        <label>Nume Complet Fidejusor *</label>
                        <input type="text" id="nume_fidejusor" placeholder="ex: Dan Elena-Madalina" required>
                    </div>

                    <div class="form-group">
                        <label>AdresƒÉ Domiciliu Fidejusor *</label>
                        <textarea id="adresa_fidejusor" placeholder="ex: Bucure»ôti, Sector 3, Bld. 1 Decembrie 1918, nr. 45" required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Serie CI *</label>
                            <input type="text" id="ci_serie_fidejusor" placeholder="ex: RZ" required>
                        </div>
                        <div class="form-group">
                            <label>NumƒÉr CI *</label>
                            <input type="text" id="ci_nr_fidejusor" placeholder="ex: 002633" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>CNP Fidejusor *</label>
                        <input type="text" id="cnp_fidejusor" placeholder="ex: 2830104032982" required>
                    </div>

                    <!-- DATE ECHIPAMENT -->
                    <div class="section-title">üîß Date Echipament</div>
                    <div class="form-group">
                        <label>Tip Echipament *</label>
                        <select id="tip_echipament" onchange="loadEchipamentTemplate()">
                            <option value="">SelecteazƒÉ echipament...</option>
                            <option value="satinee">Satinee - Epilare laser</option>
                            <option value="eraser">Eraser - √éndepƒÉrtare tatuaje</option>
                            <option value="primefrax">PrimeFrax - Laser CO2 frac»õionat</option>
                            <option value="custom">Echipament personalizat...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Denumire Echipament *</label>
                        <input type="text" id="nume_echipament" placeholder="ex: Satinee - Epilare laser" required>
                    </div>

                    <div class="form-group">
                        <label>Serie Echipament</label>
                        <input type="text" id="serie_echipament" placeholder="Se completeazƒÉ la livrare">
                    </div>

                    <!-- ACCESORII -->
                    <div class="form-group">
                        <label>Accesorii incluse</label>
                        <div class="accesorii-list" id="accesoriiList">
                            <!-- Accesoriile vor fi generate dinamic -->
                        </div>
                        <button type="button" class="btn-add" onclick="addAccesoriu()">+ AdaugƒÉ accesoriu</button>
                    </div>

                    <!-- DATE FINANCIARE -->
                    <div class="section-title">üí∞ Date Financiare</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Pre»õ Total (LEI) *</label>
                            <input type="number" id="pret_total" placeholder="ex: 60000" required onchange="calculeazaRate()">
                        </div>
                        <div class="form-group">
                            <label>Avans (LEI) *</label>
                            <input type="number" id="avans" placeholder="ex: 19800" required onchange="calculeazaRate()">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>NumƒÉr Rate *</label>
                            <input type="number" id="nr_rate" placeholder="ex: 20" required onchange="calculeazaRate()">
                        </div>
                        <div class="form-group">
                            <label>Ziua Scaden»õei (1-28) *</label>
                            <input type="number" id="zi_scadenta" min="1" max="28" value="27" required>
                        </div>
                    </div>

                    <div class="rate-group">
                        <strong>SumƒÉ de platƒÉ √Æn rate:</strong> <span id="suma_rate">0</span> LEI<br>
                        <strong>Valoare ratƒÉ lunarƒÉ:</strong> <span id="valoare_rata">0</span> LEI
                    </div>

                    <!-- GARAN»öIE -->
                    <div class="section-title">‚öôÔ∏è Garan»õie</div>
                    <div class="form-group">
                        <label>Perioada Garan»õie (luni) *</label>
                        <input type="number" id="perioada_garantie" placeholder="ex: 12" required>
                    </div>

                    <!-- AC»öIUNI -->
                    <div class="actions">
                        <button type="button" class="btn btn-primary" onclick="generateContract()">
                            üìÑ GenereazƒÉ Contract
                        </button>
                        <button type="button" class="btn btn-success" onclick="generateAll()">
                            üì¶ GenereazƒÉ Toate Documentele
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetForm()">
                            üîÑ ReseteazƒÉ
                        </button>
                    </div>
                </form>

                <!-- Preview -->
                <div id="previewBox" class="preview-box">
                    <h3>üëÅÔ∏è Previzualizare</h3>
                    <div id="previewContent" class="preview-content"></div>
                    <button type="button" class="btn btn-success" onclick="downloadContract()" style="margin-top: 15px">
                        üíæ DescarcƒÉ Document
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Setare data curentƒÉ
        document.getElementById('data_contract').valueAsDate = new Date();

        let currentTemplate = 'contract';
        let generatedDocument = '';
        let currentFilename = '';

        // Template-uri accesorii predefinite
        const accesoriiTemplates = {
            'satinee': [
                { nume: 'Ochelari protec»õie terapeut', cantitate: 1 },
                { nume: 'Ochelari protec»õie client', cantitate: 1 },
                { nume: 'Furtun apƒÉ', cantitate: 2 },
                { nume: 'P√¢lnie apƒÉ', cantitate: 1 },
                { nume: 'Chei', cantitate: 2 },
                { nume: 'Siguran»õƒÉ aparat', cantitate: 1 },
                { nume: 'Capete de tratament', cantitate: 5 },
                { nume: 'Cablu alimentare', cantitate: 1 },
                { nume: 'PedalƒÉ', cantitate: 1 }
            ],
            'eraser': [
                { nume: 'Cablu de alimentare', cantitate: 1 },
                { nume: 'Manipul', cantitate: 1 },
                { nume: 'Chei', cantitate: 2 },
                { nume: 'Capete de lucru', cantitate: 4 },
                { nume: 'Furtun', cantitate: 1 },
                { nume: 'P√¢lnie alimentare', cantitate: 1 },
                { nume: 'PedalƒÉ', cantitate: 1 },
                { nume: 'Ochelari terapeut', cantitate: 1 },
                { nume: 'Ochelari client', cantitate: 1 }
            ]
        };

        function selectTemplate(template) {
            currentTemplate = template;
            
            // Update UI
            document.querySelectorAll('.template-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.template-item').classList.add('active');

            // Update form title
            const titles = {
                'contract': 'Contract de V√¢nzare cu PlatƒÉ √Æn Rate',
                'pv': 'Proces Verbal de Recep»õie',
                'garantie': 'Certificat de Garan»õie',
                'anexa': 'Anexa - Specifica»õii Echipament'
            };
            document.getElementById('form-title').textContent = titles[template];
        }

        function toggleCumparatorFields() {
            const tip = document.getElementById('tip_cumparator').value;
            // √én func»õie de tip, po»õi ascunde/arƒÉta anumite c√¢mpuri
        }

        function loadEchipamentTemplate() {
            const tip = document.getElementById('tip_echipament').value;
            
            if (tip === 'satinee') {
                document.getElementById('nume_echipament').value = 'Satinee - Epilare laser';
                loadAccesorii('satinee');
            } else if (tip === 'eraser') {
                document.getElementById('nume_echipament').value = 'Eraser - √éndepƒÉrtare tatuaje';
                loadAccesorii('eraser');
            } else if (tip === 'primefrax') {
                document.getElementById('nume_echipament').value = 'PrimeFrax - Laser CO2 frac»õionat';
                loadAccesorii('custom');
            } else {
                document.getElementById('nume_echipament').value = '';
                loadAccesorii('custom');
            }
        }

        function loadAccesorii(template) {
            const list = document.getElementById('accesoriiList');
            list.innerHTML = '';

            const accesorii = accesoriiTemplates[template] || [];
            
            if (accesorii.length > 0) {
                accesorii.forEach((acc, index) => {
                    addAccesoriuWithData(acc.nume, acc.cantitate);
                });
            } else {
                addAccesoriu();
            }
        }

        function addAccesoriu() {
            addAccesoriuWithData('', 1);
        }

        function addAccesoriuWithData(nume, cantitate) {
            const list = document.getElementById('accesoriiList');
            const index = list.children.length;
            
            const item = document.createElement('div');
            item.className = 'accesoriu-item';
            item.innerHTML = `
                <input type="text" placeholder="Denumire accesoriu" value="${nume}" class="acc-nume">
                <input type="number" placeholder="Cant." value="${cantitate}" min="1" class="acc-cant">
                <button type="button" class="btn-remove" onclick="removeAccesoriu(this)">‚úï</button>
            `;
            list.appendChild(item);
        }

        function removeAccesoriu(btn) {
            btn.closest('.accesoriu-item').remove();
        }

        function calculeazaRate() {
            const pretTotal = parseFloat(document.getElementById('pret_total').value) || 0;
            const avans = parseFloat(document.getElementById('avans').value) || 0;
            const nrRate = parseInt(document.getElementById('nr_rate').value) || 1;

            const sumaRate = pretTotal - avans;
            const valorataRata = Math.round(sumaRate / nrRate);

            document.getElementById('suma_rate').textContent = sumaRate.toLocaleString('ro-RO');
            document.getElementById('valoare_rata').textContent = valorataRata.toLocaleString('ro-RO');
        }

        function getFormData() {
            const accesorii = [];
            document.querySelectorAll('.accesoriu-item').forEach(item => {
                const nume = item.querySelector('.acc-nume').value;
                const cant = item.querySelector('.acc-cant').value;
                if (nume) {
                    accesorii.push({ nume, cantitate: cant });
                }
            });

            return {
                numar_contract: document.getElementById('numar_contract').value,
                data_contract: document.getElementById('data_contract').value,
                nume_cumparator: document.getElementById('nume_cumparator').value,
                cui_cumparator: document.getElementById('cui_cumparator').value,
                rc_cumparator: document.getElementById('rc_cumparator').value,
                cnp_cumparator: document.getElementById('cnp_cumparator').value,
                adresa_cumparator: document.getElementById('adresa_cumparator').value,
                cont_cumparator: document.getElementById('cont_cumparator').value,
                nume_fidejusor: document.getElementById('nume_fidejusor').value,
                adresa_fidejusor: document.getElementById('adresa_fidejusor').value,
                ci_serie_fidejusor: document.getElementById('ci_serie_fidejusor').value,
                ci_nr_fidejusor: document.getElementById('ci_nr_fidejusor').value,
                cnp_fidejusor: document.getElementById('cnp_fidejusor').value,
                nume_echipament: document.getElementById('nume_echipament').value,
                serie_echipament: document.getElementById('serie_echipament').value,
                pret_total: document.getElementById('pret_total').value,
                avans: document.getElementById('avans').value,
                nr_rate: document.getElementById('nr_rate').value,
                zi_scadenta: document.getElementById('zi_scadenta').value,
                perioada_garantie: document.getElementById('perioada_garantie').value,
                accesorii: accesorii
            };
        }

        function generateContract() {
            const data = getFormData();
            
            // Validare
            if (!data.numar_contract || !data.data_contract || !data.nume_cumparator) {
                showAlert('CompleteazƒÉ toate c√¢mpurile obligatorii!', 'warning');
                return;
            }

            // CalculeazƒÉ ratele
            const pretTotal = parseFloat(data.pret_total);
            const avans = parseFloat(data.avans);
            const nrRate = parseInt(data.nr_rate);
            const sumaRate = pretTotal - avans;
            const valorataRata = Math.round(sumaRate / nrRate);

            // GenereazƒÉ datele ratelor
            const dataStart = new Date(data.data_contract);
            const rate = [];
            for (let i = 1; i <= nrRate; i++) {
                const dataRata = new Date(dataStart);
                dataRata.setMonth(dataStart.getMonth() + i);
                dataRata.setDate(parseInt(data.zi_scadenta));
                rate.push({
                    nr: i,
                    valoare: valorataRata,
                    data: formatDate(dataRata)
                });
            }

            let contract = '';

            if (currentTemplate === 'contract') {
                contract = generateContractText(data, rate, valorataRata);
                currentFilename = `Contract_${data.nume_cumparator.replace(/\s+/g, '_')}_${data.numar_contract}.txt`;
            } else if (currentTemplate === 'pv') {
                contract = generatePVText(data);
                currentFilename = `PV_Receptie_${data.nume_cumparator.replace(/\s+/g, '_')}.txt`;
            } else if (currentTemplate === 'garantie') {
                contract = generateGarantieText(data);
                currentFilename = `Certificat_Garantie_${data.nume_cumparator.replace(/\s+/g, '_')}.txt`;
            } else if (currentTemplate === 'anexa') {
                contract = generateAnexaText(data);
                currentFilename = `Anexa_1_${data.nume_echipament.replace(/\s+/g, '_')}.txt`;
            }

            generatedDocument = contract;
            document.getElementById('previewContent').textContent = contract;
            document.getElementById('previewBox').classList.add('show');
            
            showAlert('Document generat cu succes!', 'success');
        }

        function generateContractText(data, rate, valorataRata) {
            const dataFormatted = formatDate(new Date(data.data_contract));
            
            let rateText = '';
            rate.forEach(r => {
                rateText += `RATA ${r.nr}: ${r.valoare.toLocaleString('ro-RO')} LEI, scaden»õƒÉ ${r.data}\n`;
            });

            return `CONTRACT DE V√ÇNZARE CU PLATƒÇ √éN RATE
NR. ${data.numar_contract} / ${dataFormatted}

√éNTRE:

V√ÇNZƒÇTOR:
ARDA MANUFACTURING SRL
CUI: 33309968, J40/7470/2014
Sediu: Bucure»ôti, Str. Poet Panait Cernea nr. 1, BL M52, sc. 2, et. 4, ap. 47
Punct de lucru: Str. Foisorului nr. 107, sector 3, Bucure»ôti
Cont: RO28BTRLRONCRT0258793601 - Banca Transilvania
Reprezentant legal: Ionu»õ Dinu

»òI

CUMPƒÇRƒÇTOR:
${data.nume_cumparator.toUpperCase()}
CIF: ${data.cui_cumparator}
Nr. Registrul Comer»õului: ${data.rc_cumparator}
CNP: ${data.cnp_cumparator}
AdresƒÉ: ${data.adresa_cumparator}
Cont bancar: ${data.cont_cumparator || '_________________________________'}
Reprezentant legal: ${data.nume_cumparator}

»òI

FIDEJUSOR:
Nume: ${data.nume_fidejusor}
Domiciliu: ${data.adresa_fidejusor}
CI seria ${data.ci_serie_fidejusor} nr. ${data.ci_nr_fidejusor}, CNP: ${data.cnp_fidejusor}


ARTICOLUL 1 - OBIECTUL CONTRACTULUI

1.1. V√¢nzƒÉtorul vinde, iar CumpƒÉrƒÉtorul cumpƒÉrƒÉ cu plata √Æn rate echipamentul »ôi accesoriile specificate √Æn ANEXA 1 la prezentul contract, dupƒÉ cum urmeazƒÉ:

${data.nume_echipament}
Serie: ${data.serie_echipament || '_________________________________'}
Pre»õ total: ${parseFloat(data.pret_total).toLocaleString('ro-RO')} LEI

1.2. Echipamentul include toate accesoriile, componentele »ôi documenta»õia tehnicƒÉ men»õionate √Æn Anexa 1, care face parte integrantƒÉ din prezentul contract.

1.3. IMPORTANT: Echipamentul √ÆmpreunƒÉ cu toate accesoriile sale rƒÉm√¢n proprietatea V√¢nzƒÉtorului p√¢nƒÉ la achitarea integralƒÉ a tuturor ratelor. Transferul de proprietate se realizeazƒÉ doar la plata ultimei rate.


ARTICOLUL 2 - PRE»öUL »òI MODALITATEA DE PLATƒÇ

2.1. Pre»õul total al echipamentului este de ${parseFloat(data.pret_total).toLocaleString('ro-RO')} LEI, plƒÉtibil dupƒÉ cum urmeazƒÉ:

AVANS: ${parseFloat(data.avans).toLocaleString('ro-RO')} LEI - achitat la data semnƒÉrii contractului

Sold de platƒÉ: ${(parseFloat(data.pret_total) - parseFloat(data.avans)).toLocaleString('ro-RO')} LEI, plƒÉtibil √Æn ${data.nr_rate} rate lunare egale a ${valorataRata.toLocaleString('ro-RO')} LEI fiecare, dupƒÉ cum urmeazƒÉ:

${rateText}
2.2. Plata se efectueazƒÉ √Æn LEI exclusiv prin transfer bancar.

2.3. Ratele sunt garantate cu bilete la ordin sau file CEC. Garan»õiile se returneazƒÉ dupƒÉ achitarea fiecƒÉrei rate.

2.4. √én caz de √Ænt√¢rziere la platƒÉ peste 15 zile de la scaden»õƒÉ, biletele la ordin/CEC vor fi introduse la platƒÉ, iar CumpƒÉrƒÉtorul va datora penalitƒÉ»õi de 0,1% pe zi.


ARTICOLUL 3 - LIVRARE »òI MONTAJ

3.1. Echipamentul √ÆmpreunƒÉ cu toate accesoriile specificate √Æn Anexa 1 se livreazƒÉ √Æn 10 zile lucrƒÉtoare de la semnarea contractului la adresa CumpƒÉrƒÉtorului, pe baza procesului-verbal de recep»õie.

3.2. La predare, CumpƒÉrƒÉtorul va verifica »ôi semna Anexa 1, confirm√¢nd primirea echipamentului complet cu toate accesoriile enumerate.

3.3. Montajul »ôi trainingul (3 ore) se realizeazƒÉ exclusiv de cƒÉtre V√¢nzƒÉtor la sediul V√¢nzƒÉtorului, pe bazƒÉ de programare.


ARTICOLUL 4 - GARAN»öIE

4.1. Echipamentul beneficiazƒÉ de garan»õie conform certificatului de garan»õie anexat la contract.

4.2. Garan»õia acoperƒÉ defectele de fabrica»õie »ôi viciile ascunse, dar NU acoperƒÉ:
- DeteriorƒÉri cauzate de manipulare necorespunzƒÉtoare
- Defecte cauzate de montare sau folosire neconformƒÉ
- DeteriorƒÉri prin accident, neglijen»õƒÉ sau nerespectarea instruc»õiunilor
- Accesorii, consumabile sau piese casabile
- Defec»õiuni cauzate de varia»õii de tensiune electricƒÉ

4.3. Garan»õia este valabilƒÉ doar cu prezentarea facturii originale »ôi a certificatului de garan»õie.


ARTICOLUL 5 - RESTRIC»öII »òI OBLIGA»öII ALE CUMPƒÇRƒÇTORULUI

P√¢nƒÉ la achitarea integralƒÉ a tuturor ratelor, CumpƒÉrƒÉtorul NU are dreptul sƒÉ:

5.1. √énstrƒÉineze, √Ænchirieze, dea √Æn comodat sau sƒÉ constituie garan»õii asupra echipamentului
5.2. Efectueze repara»õii sau desfaceri ale echipamentului (doar personal autorizat al V√¢nzƒÉtorului)
5.3. Mute echipamentul √Æn altƒÉ loca»õie fƒÉrƒÉ acordul scris al V√¢nzƒÉtorului
5.4. Cedeze prezentul contract sau orice drepturi/obliga»õii din acesta fƒÉrƒÉ acordul V√¢nzƒÉtorului

5.5. Nerespectarea acestor restric»õii atrage:
- Pierderea garan»õiei echipamentului
- Obliga»õia de platƒÉ a unei despƒÉgubiri de 20% din valoarea contractului
- Dreptul V√¢nzƒÉtorului de a ridica echipamentul


ARTICOLUL 6 - DREPTUL V√ÇNZƒÇTORULUI DE A RIDICA ECHIPAMENTUL

6.1. Av√¢nd √Æn vedere cƒÉ echipamentul este proprietatea V√¢nzƒÉtorului p√¢nƒÉ la plata integralƒÉ, V√¢nzƒÉtorul are dreptul sƒÉ ridice echipamentul √Æn urmƒÉtoarele situa»õii:

a) √ént√¢rziere la plata oricƒÉrei rate cu peste 10 zile de la scaden»õƒÉ
b) √éncƒÉlcarea restric»õiilor prevƒÉzute la art. 5
c) Deschiderea procedurii de insolven»õƒÉ/reorganizare judiciarƒÉ √Æmpotriva CumpƒÉrƒÉtorului

6.2. √én caz de ridicare a echipamentului din culpa CumpƒÉrƒÉtorului:
- Sumele plƒÉtite p√¢nƒÉ √Æn acel moment NU se returneazƒÉ (reprezintƒÉ contravaloarea folosirii echipamentului)
- CumpƒÉrƒÉtorul datoreazƒÉ o despƒÉgubire suplimentarƒÉ de 20% din valoarea contractului
- DacƒÉ echipamentul este deteriorat, costul repara»õiei/√Ænlocuirii este suportat integral de CumpƒÉrƒÉtor »ôi Fidejusor


ARTICOLUL 7 - FIDEJUSIUNEA

7.1. Fidejusorul garanteazƒÉ √Æn solidar cu CumpƒÉrƒÉtorul √Ændeplinirea tuturor obliga»õiilor de platƒÉ »ôi despƒÉgubire din prezentul contract.

7.2. Fidejusorul renun»õƒÉ la beneficiul de discu»õiune »ôi de diviziune, V√¢nzƒÉtorul put√¢nd urmƒÉri direct Fidejusorul pentru executarea oricƒÉror obliga»õii.

7.3. Fidejusiunea √ÆnceteazƒÉ odatƒÉ cu achitarea integralƒÉ a tuturor obliga»õiilor de cƒÉtre CumpƒÉrƒÉtor sau prin achitarea directƒÉ a acestora de cƒÉtre Fidejusor.


ARTICOLUL 8 - REZILIEREA CONTRACTULUI

8.1. Contractul poate fi reziliat de plin drept de cƒÉtre V√¢nzƒÉtor, fƒÉrƒÉ soma»õie prealabilƒÉ, √Æn urmƒÉtoarele cazuri:
- Neachitarea oricƒÉrei rate dupƒÉ 10 zile de la scaden»õƒÉ
- √éncƒÉlcarea restric»õiilor de la art. 5

8.2. Rezilierea se considerƒÉ operatƒÉ prin trimiterea unei notificƒÉri scrise cƒÉtre CumpƒÉrƒÉtor.


ARTICOLUL 9 - CLAUZA DE ACCELERARE

9.1. √én caz de ne√Ændeplinire a oricƒÉrei obliga»õii de platƒÉ, V√¢nzƒÉtorul poate declara imediat exigibilƒÉ √Æntreaga sumƒÉ restantƒÉ, fƒÉrƒÉ notificare prealabilƒÉ.


ARTICOLUL 10 - FOR»öA MAJORƒÇ

10.1. For»õa majorƒÉ exonereazƒÉ pƒÉr»õile de rƒÉspundere. Partea care invocƒÉ for»õa majorƒÉ trebuie sƒÉ notifice cealaltƒÉ parte √Æn scris √Æn termen de 5 zile, cu dovezi √Æn 10 zile.


ARTICOLUL 11 - DISPOZI»öII FINALE

11.1. Orice modificare a contractului se face prin act adi»õional semnat de ambele pƒÉr»õi.

11.2. V√¢nzƒÉtorul are dreptul de a inspecta echipamentul la loca»õia CumpƒÉrƒÉtorului, cu preaviz rezonabil, p√¢nƒÉ la transferul de proprietate.

11.3. NotificƒÉrile se trimit la adresele men»õionate √Æn preambul »ôi se considerƒÉ primite:
- Pentru po»ôtƒÉ: la data confirmƒÉrii de primire
- Pentru email: √Æn prima zi lucrƒÉtoare dupƒÉ expediere

11.4. Litigiile se solu»õioneazƒÉ pe cale amiabilƒÉ sau, √Æn caz contrar, de instan»õele din municipiul Bucure»ôti.

11.5. CumpƒÉrƒÉtorul »ôi Fidejusorul declarƒÉ cƒÉ nu sunt √Æn procedurƒÉ de insolven»õƒÉ/reorganizare »ôi se obligƒÉ sƒÉ notifice V√¢nzƒÉtorul √Æn 5 zile √Æn caz de ini»õiere a oricƒÉrei astfel de proceduri.

11.6. Prezentul contract a fost negociat »ôi acceptat √Æn mod expres de toate pƒÉr»õile, reprezent√¢nd voin»õa lor realƒÉ.


√éncheiat astƒÉzi, ${dataFormatted}, √Æn 3 exemplare originale.


V√ÇNZƒÇTOR                          CUMPƒÇRƒÇTOR                          FIDEJUSOR
ARDA MANUFACTURING SRL

_____________________          _____________________          _____________________
Ionu»õ Dinu                         ${data.nume_cumparator}                 ${data.nume_fidejusor}


‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

NOTƒÇ: Anexa 1 (Specifica»õii echipament »ôi accesorii) face parte integrantƒÉ 
din prezentul contract »ôi este ata»ôatƒÉ ca document separat.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`;
        }

        function generatePVText(data) {
            return `PROCES VERBAL DE RECEP»öIE

Nr. ${data.numar_contract} / ${formatDate(new Date(data.data_contract))}

Referitor la: Contract de v√¢nzare cu platƒÉ √Æn rate nr. ${data.numar_contract} / ${formatDate(new Date(data.data_contract))}


PƒÇR»öILE:

FURNIZOR:
ARDA MANUFACTURING SRL
CUI: 33309968, J40/7470/2014
Sediu: Bucure»ôti, Str. Poet Panait Cernea nr. 1, BL M52, sc. 2, et. 4, ap. 47
Punct de lucru: Str. Foisorului nr. 107, sector 3, Bucure»ôti
Reprezentant: Ionu»õ Dinu

BENEFICIAR:
${data.nume_cumparator.toUpperCase()}
CUI: ${data.cui_cumparator}
Nr. Registrul Comer»õului: ${data.rc_cumparator}
CNP: ${data.cnp_cumparator}
AdresƒÉ livrare: ${data.adresa_cumparator}
Reprezentant: ${data.nume_cumparator}


OBIECTUL RECEP»öIEI:

Echipament: ${data.nume_echipament}
Serie: ${data.serie_echipament || '_________________________________'}
Valoare: ${parseFloat(data.pret_total).toLocaleString('ro-RO')} LEI


VERIFICƒÇRI EFECTUATE:

‚ñ° Echipamentul a fost livrat complet conform Anexei 1 la contract
‚ñ° Toate accesoriile sunt prezente »ôi √Æn stare bunƒÉ
‚ñ° Echipamentul este func»õional
‚ñ° Nu prezintƒÉ defecte vizibile sau deteriorƒÉri
‚ñ° Ambalajul este intact
‚ñ° Documenta»õia tehnicƒÉ este completƒÉ (manual + certificat garan»õie)
‚ñ° Echipamentul a fost testat √Æn prezen»õa beneficiarului


CONCLUZII:

Echipamentul »ôi accesoriile au fost recep»õionate √Æn stare bunƒÉ de func»õionare, 
conform specifica»õiilor din contract »ôi Anexa 1.

Beneficiarul confirmƒÉ primirea echipamentului complet »ôi func»õional.


Data recep»õiei: _________________________________
Locul recep»õiei: ${data.adresa_cumparator}


FURNIZOR                                    BENEFICIAR
ARDA MANUFACTURING SRL

_____________________                       _____________________
Ionu»õ Dinu                                  ${data.nume_cumparator}


»òtampilƒÉ                                    »òtampilƒÉ`;
        }

        function generateGarantieText(data) {
            return `CERTIFICAT DE GARAN»öIE

Nr. ${data.numar_contract} / ${formatDate(new Date(data.data_contract))}


FURNIZOR / IMPORTATOR:
ARDA MANUFACTURING SRL
CUI: 33309968, J40/7470/2014
AdresƒÉ: Bucure»ôti, Str. Foisorului nr. 107, sector 3
Telefon: 0774699211
Email: contact@primeestetic.ro


BENEFICIAR:
Nume: ${data.nume_cumparator.toUpperCase()}
CUI: ${data.cui_cumparator}, Nr. RC: ${data.rc_cumparator}
AdresƒÉ: ${data.adresa_cumparator}
Telefon: _________________________________
Email: _________________________________


ECHIPAMENT GARANTAT:

Denumire: ${data.nume_echipament}
Serie: ${data.serie_echipament || '_________________________________'}
Data achizi»õiei: ${formatDate(new Date(data.data_contract))}
Data punerii √Æn func»õiune: _________________________________


CONDI»öII DE GARAN»öIE:

Perioada de garan»õie: ${data.perioada_garantie} LUNI de la data punerii √Æn func»õiune

Data expirƒÉrii garan»õiei: _________________________________


CE ACOPERƒÇ GARAN»öIA:

‚úì Defecte de fabrica»õie
‚úì Vicii ascunse ale echipamentului
‚úì Repara»õii efectuate de personal autorizat ARDA MANUFACTURING
‚úì Piese de schimb originale (dacƒÉ este cazul)


CE NU ACOPERƒÇ GARAN»öIA:

‚úó DeteriorƒÉri cauzate de manipulare necorespunzƒÉtoare
‚úó Defecte cauzate de montare sau utilizare neconformƒÉ cu manualul
‚úó DeteriorƒÉri prin accident, neglijen»õƒÉ sau nerespectarea instruc»õiunilor
‚úó Accesorii, consumabile sau piese casabile
‚úó Defec»õiuni cauzate de varia»õii de tensiune electricƒÉ
‚úó Utilizarea de consumabile neoriginale
‚úó Deteriorarea sau distrugerea sigiliilor aparatului
‚úó Repara»õii efectuate de personal neautorizat
‚úó Interven»õii tehnice efectuate fƒÉrƒÉ acordul ARDA MANUFACTURING


Contact pentru service:
Telefon: 0774699211
Email: contact@primeestetic.ro
Program: Luni - Vineri, 09:00 - 17:00


EMIS DE:
ARDA MANUFACTURING SRL

Data emiterii: ${formatDate(new Date(data.data_contract))}

_____________________
Ionu»õ Dinu
Administrator


»òtampilƒÉ firmƒÉ`;
        }

        function generateAnexaText(data) {
            let accesoriiText = '';
            data.accesorii.forEach((acc, index) => {
                accesoriiText += `‚îÇ  ${(index + 1).toString().padEnd(3)}‚îÇ ${acc.nume.padEnd(32)} ‚îÇ  ${acc.cantitate.toString().padEnd(18)}‚îÇ\n`;
            });

            return `ANEXA 1 - SPECIFICA»öII ECHIPAMENT »òI ACCESORII

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

ECHIPAMENT PRINCIPAL:

Denumire: ${data.nume_echipament}
Serie: ${data.serie_echipament || '_________________________________'}


ACCESORII »òI COMPONENTE INCLUSE:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Nr. ‚îÇ  Denumire accesoriu              ‚îÇ  Cantitate             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
${accesoriiText}‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


DOCUMENTA»öIE INCLUSƒÇ:

‚ñ° Manual de utilizare
‚ñ° Certificat de garan»õie


PRE»öUL TOTAL: ${parseFloat(data.pret_total).toLocaleString('ro-RO')} LEI


NOTƒÇ: 
Toate componentele »ôi accesoriile enumerate mai sus fac parte integrantƒÉ din contract »ôi sunt supuse acelora»ôi condi»õii ca echipamentul principal.


Data recep»õiei: __________

SemnƒÉtura CumpƒÉrƒÉtor: _____________________`;
        }

        function formatDate(date) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}.${month}.${year}`;
        }

        function showAlert(message, type) {
            const alert = document.getElementById('alert');
            alert.textContent = message;
            alert.className = `alert alert-${type} show`;
            setTimeout(() => {
                alert.classList.remove('show');
            }, 5000);
        }

        function downloadContract() {
            const blob = new Blob([generatedDocument], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = currentFilename;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }

        function generateAll() {
            const data = getFormData();
            
            if (!data.numar_contract || !data.data_contract || !data.nume_cumparator) {
                showAlert('CompleteazƒÉ toate c√¢mpurile obligatorii!', 'warning');
                return;
            }

            // GenereazƒÉ toate documentele
            const templates = ['contract', 'pv', 'garantie', 'anexa'];
            
            templates.forEach(template => {
                currentTemplate = template;
                generateContract();
                downloadContract();
            });

            showAlert('Toate documentele au fost generate »ôi descƒÉrcate!', 'success');
        }

        function resetForm() {
            document.getElementById('contractForm').reset();
            document.getElementById('previewBox').classList.remove('show');
            document.getElementById('accesoriiList').innerHTML = '';
            addAccesoriu();
            calculeazaRate();
            document.getElementById('data_contract').valueAsDate = new Date();
        }

        // Ini»õializare
        addAccesoriu();
   /* =========================================================
   SALVARE DATE √éN MINI-CRM (storage.js)
   ========================================================= */

function saveClientToCRM(data) {
    const client = {
        id: Date.now(),
        nume: data.nume_cumparator,
        cui: data.cui_cumparator,
        rc: data.rc_cumparator,
        cnp: data.cnp_cumparator,
        adresa: data.adresa_cumparator,
        telefon: data.telefon || "",
        email: data.email || "",
        createdAt: new Date().toISOString()
    };

    Storage.saveClient(client);
    return client.id;
}

function saveContractToCRM(data, contractText, filename) {
    const contract = {
        id: Date.now(),
        numar_contract: data.numar_contract,
        cumparator: data.nume_cumparator,
        denumire_echipament: data.nume_echipament,
        valoare_totala: data.pret_total,
        avans: data.avans,
        nr_rate: data.nr_rate,
        rata_lunara: Math.round((data.pret_total - data.avans) / data.nr_rate),
        data_contract: data.data_contract,
        scadenta: data.zi_scadenta,
        fisier_nume: filename,
        fisier_continut: contractText,
        createdAt: new Date().toISOString()
    };

    Storage.saveContract(contract);
    return contract.id;
}

function saveRatesToCRM(data) {
    const pret = parseFloat(data.pret_total);
    const avans = parseFloat(data.avans);
    const nrRate = parseInt(data.nr_rate);
    const valoareRata = Math.round((pret - avans) / nrRate);

    const startDate = new Date(data.data_contract);
    const rate = [];

    for (let i = 1; i <= nrRate; i++) {
        let d = new Date(startDate);
        d.setMonth(startDate.getMonth() + i);
        d.setDate(data.zi_scadenta);

        rate.push({
            id: Date.now() + i,
            nr: i,
            numar_contract: data.numar_contract,
            cumparator: data.nume_cumparator,
            valoare: valoareRata,
            scadenta: d.toISOString(),
            status: "neachitata"
        });
    }

    rate.forEach(r => Storage.saveRate(r));
}

/* =========================================================
   SUPRASCRIU generateContract() ‚Äî adaug salvƒÉri CRM
   ========================================================= */

const originalGenerateContract = generateContract;

generateContract = function () {
    originalGenerateContract();  // pƒÉstrƒÉm func»õia ta originalƒÉ

    const data = getFormData();

    // salveazƒÉ clientul
    const clientId = saveClientToCRM(data);

    // salveazƒÉ contractul
    saveContractToCRM(data, generatedDocument, currentFilename);

    // salveazƒÉ ratele
    saveRatesToCRM(data);

    console.log("üü© Date salvate √Æn CRM local!");
}
 </script>
    <script src="../js/storage.js"></script>
</body>
</html>
`;
